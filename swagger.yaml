openapi: "3.0.0"
info:
  version: "1.0.0"
  title: "Task Pro Doc API"
  description: "API for managing tasks and todo lists"
servers:
  - url: https://protask-backend-qjoh.onrender.com
    description: Production server
  - url: http://localhost:3000
    description: Development server

tags:
  - name: Authentication
    description: "All methods about authentication"
  - name: User
    description: "All methods about "

paths:
  /auth/register:
    post:
      summary: Creates a user
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRegister"
      responses:
        "201":
          description: Created
        "400":
          description: Bad request
        "409":
          description: Conflict. Email alreasy in use
  /auth/login:
    post:
      summary: Login a user.
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserLogin"
      responses:
        "200":
          description: Success
          content:
            application/json;charset=UTF-8:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY2MzJhNzE2YmU3MDdlMmFmNjBjMzA2MyIsImlhdCI6MTcxNDU5NTYzMiwiZXhwIjoxNzE0Njc4NDMyfQ.gV4vdobUN8-qyLEQzK45BbTY75It4NEWVyzW1YZii1s
                  message:
                    type: object
                    properties:
                      name:
                        type: string
                        example: "test@gmail.com"
                      email:
                        type: string
                        example: "Password1"
                      avatar:
                        type: string
                        example: "//www.gravatar.com/avatar/f43bb93d61d8fb8d06fc2c16b847ce06?s=250"
                      theme:
                        type: string
                        example: light

        "400":
          description: Bad request
        "401":
          description: Email or password invalid
  /auth/current:
    post:
      summary: "Get current user's data"
      description: "Endpoint to get current user's data."
      tags:
        - Authentication
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Success
          content:
            application/json;charset=UTF-8:
              schema:
                type: object
                properties:
                  message:
                    type: object
                    properties:
                      name:
                        type: string
                        example: "test@gmail.com"
                      email:
                        type: string
                        example: "Password1"
                      avatar:
                        type: string
                        example: "//www.gravatar.com/avatar/f43bb93d61d8fb8d06fc2c16b847ce06?s=250"
        "401":
          description: Authorization header not found
        "403":
          description: Forbidden
  /auth/logout:
    post:
      summary: "Logout a user"
      description: "Endpoint to log out a user."
      tags:
        - Authentication
      security:
        - bearerAuth: []
      responses:
        "204":
          description: Success
        "401":
          description: Authorization header not found
        "403":
          description: Forbidden

  /users/edit/theme:
    patch:
      summary: Edit your personal theme
      tags:
        - User
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserTheme"
      responses:
        "201":
          description: Changed
        "400":
          description: Invalid data
        "401":
          description: Authorization header not found
        "403":
          description: Forbidden
  /users/need-help:
    patch:
      summary: Edit your personal theme
      tags:
        - User
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserNeedHelp"
      responses:
        "201":
          description: Success
        "400":
          description: Invalid data
        "401":
          description: Authorization header not found
        "403":
          description: Forbidden
  /users/edit/profile:
    patch:
      summary: Edit your personal data
      tags:
        - User
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/EditProfileShema"
              profileImage:
                type: string
      responses:
        "201":
          description: Success
        "400":
          description: Invalid data
        "401":
          description: Authorization header not found
        "403":
          description: Forbidden
components:
  schemas:
    UserRegister:
      type: object
      properties:
        name:
          type: string
          example: "name"
        email:
          type: string
          format: email
          example: "test@gmail.com"
        password:
          type: string
          example: "Password1"
    UserLogin:
      type: object
      properties:
        email:
          type: string
          format: email
          example: "test@gmail.com"
        password:
          type: string
          example: "Password1"
    UserTheme:
      type: object
      properties:
        theme:
          type: string
          enum: ["light", "dark", "violet"]
          example: "light"
    UserNeedHelp:
      type: object
      properties:
        description:
          type: string
          example: "User comment"
    EditProfileShema:
      type: object
      properties:
        name:
          type: string
          example: "name"
        email:
          type: string
          format: email
          example: "test@gmail.com"
        password:
          type: string
          example: "Password1"
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
